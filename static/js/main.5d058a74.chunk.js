(this["webpackJsonpreact-calandar"]=this["webpackJsonpreact-calandar"]||[]).push([[0],{120:function(e,n,t){},160:function(e,n,t){},161:function(e,n,t){"use strict";t.r(n);var a=t(0),c=t(11),i=t.n(c),r=(t(120),t(23)),o=t(20),s=t(34),l=t.n(s),d=t(50),u=t(15),j=t(24),p=t(59);t(163),t(126);p.a.initializeApp({apiKey:"AIzaSyAFETIrGjBboNjTbpjY45_3rdKM0wxuUbs",authDomain:"socialcal-6198a.firebaseapp.com",projectId:"socialcal-6198a",storageBucket:"socialcal-6198a.appspot.com",messagingSenderId:"292095107474",appId:"1:292095107474:web:aa4c7685ab84da1795a14b"});var b=p.a.firestore(),h=p.a.auth(),O=p.a,x=t(5),f=function(){var e=function(){var e=Object(d.a)(l.a.mark((function e(n){var t,a,c,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"google"===n.target.name&&(t=new O.auth.GoogleAuthProvider),e.next=4,h.signInWithPopup(t);case 4:return a=e.sent,console.log(a.user),c={displayName:a.user.displayName,email:a.user.email,uid:a.user.uid},localStorage.setItem("user",JSON.stringify(c)),i=b.collection("users").doc(a.user.uid),e.next=11,i.get().then((function(e){e.exists?console.log("Welcome again!"):(b.collection("users").doc(a.user.uid).set(c),console.log("Welcome!"))})).catch((function(e){console.log("Error getting document:",e)}));case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return Object(x.jsx)("div",{className:"authContainer",children:Object(x.jsx)("div",{className:"authBtns",children:Object(x.jsx)("button",{onClick:e,name:"google",className:"authBtn",children:"Continue with Google"})})})},g=t(103),m=t.n(g),v=t(194),y=t(105),w=t.n(y),C=t(104),k=t.n(C),E=t(21),I=t(107),N=t(91),S=t(38),B=t(60),T=b.collection("calendar"),A=localStorage.getItem("userChatUrl"),z=JSON.parse(A),F=[];for(var U in z)F.push(z[U].chatUrl);F.push("none");var L=b.collection("calendar").where("planning","in",F),D={list:[]},R=function(e){return function(e){L.get().then((function(n){var t=[];n.forEach((function(e){e.exists&&(t=[].concat(Object(B.a)(t),[Object(S.a)({id:e.id},e.data())]))})),e(function(e){return{type:"calendar/GET_CALENDAR",data:e}}(t))}))}};var _,P,G,J,K,W=function(e){var n=Object(j.b)(),t=Object(j.c)((function(e){return e.calendar.list}));Object(a.useEffect)((function(){n(R())}),[]);var c=t.map((function(e){return{title:e.title,date:e.date,publicId:e.id,completed:e.completed,color:e.completed?"#E74C3C":"#ABEBC6"}})),i=c.filter((function(e){return!0===e.completed})),o=Object(a.useState)(!0),s=Object(r.a)(o,2),l=s[0];return s[1],Object(x.jsx)("div",{children:Object(x.jsx)(I.a,{plugins:[N.a],headerToolbar:{start:"prev next today",center:"title",end:""},titleFormat:{year:"numeric",month:"short"},events:l?c:i,eventClick:function(n){e.history.push("/detail/"+n.event._def.extendedProps.publicId)},height:"100vh"})})},M=t(193),Q=t(97),V=t.n(Q),H=t(99),Y=t.n(H),q=t(98),X=t.n(q),Z=t(92),$=t.n(Z);var ee,ne,te,ae=E.a.div(_||(_=Object(o.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),ce=E.a.div(P||(P=Object(o.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n"]))),ie=E.a.div(G||(G=Object(o.a)(["\n  display: flex;\n  flex-direction: column;\n  background: #fff;\n  padding: 24px 50px;\n  border-radius: 4px;\n  width: 600px;\n  height: 400px;\n  box-sizing: border-box;\n  z-index: 10;\n  & h1 {\n    text-align: center;\n    color: #af7ac5;\n  }\n  & h2 {\n    color: #34495e;\n  }\n\n  & Button {\n    min-width: 200px;\n  }\n"]))),re=E.a.div(J||(J=Object(o.a)(["\n  width: 30px;\n  height: 30px;\n  cursor: pointer;\n  position: relative;\n  left: -30px;\n"]))),oe=E.a.div(K||(K=Object(o.a)(["\n  margin: 0 auto;\n  @media only screen and (max-width: 768px) {\n    & Button {\n      width: 100%;\n    }\n  }\n"]))),se=function(e){var n=Object(j.b)(),t=Object(a.useState)(!1),c=Object(r.a)(t,2),i=c[0],o=c[1],s=Object(j.c)((function(e){return e.calendar.list}));Object(a.useEffect)((function(){n(R()),u===l.creatorId?o(!0):o(!1),console.log(u),console.log("isOwner is"+i)}),[]);for(var l,d=localStorage.getItem("user"),u=JSON.parse(d).uid,p=e.match.params.defid,b=0;b<s.length;b++)s[b].id===p&&(l=s[b]);return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(ae,{children:Object(x.jsxs)(ie,{children:[Object(x.jsx)(re,{onClick:function(){e.history.goBack()},children:Object(x.jsx)($.a,{style:{color:"#EC7063"}})}),Object(x.jsxs)("h1",{children:[Object(x.jsx)(V.a,{})," \xa0\uc0c1\uc138 \uc77c\uc815 \ubcf4\uae30"]}),Object(x.jsxs)("h2",{children:[Object(x.jsx)(X.a,{style:{color:"#85C1E9"}}),"\xa0 \ub0a0\uc9dc: ",l?l.date.split("T")[0]:" "," ","\xa0\xa0\xa0\xa0\xa0\xa0",l?l.date.split("T")[1].split(":")[0]>11?"\uc624\ud6c4":"\uc624\uc804":"","\xa0\xa0",l?l.date.split("T")[1].split(":")[0]>12?l.date.split("T")[1].split(":")[0]-12+":"+l.date.split("T")[1].split(":")[1]:l.date.split("T")[1].split(":")[0]+":"+l.date.split("T")[1].split(":")[1]:""]}),Object(x.jsxs)("h2",{children:[Object(x.jsx)(Y.a,{style:{color:"#85C1E9"}}),"\xa0 \uc774\ubca4\ud2b8: ",l?l.title:""]}),Object(x.jsx)("hr",{}),Object(x.jsxs)(oe,{children:[i&&Object(x.jsx)(M.a,{variant:"contained",style:{marginRight:"50px"},onClick:function(){var t;n((t=p,function(e,n){for(var a,c=n().calendar.list,i=0;i<c.length;i++)c[i].id===t&&(a=c[i]);a.id&&T.doc(a.id).delete().then((function(n){e(function(e){return{type:"calendar/DELETE",id:e}}(t))})).catch((function(e){console.log(e),window.alert("\uc5d0\ub7ec\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4. \ub098\uc911\uc5d0 \ub2e4\uc2dc \uc2dc\ub3c4\ud574 \uc8fc\uc138\uc694!")}))})),e.history.goBack()},children:"\uc774\ubca4\ud2b8 \uc0ad\uc81c"}),Object(x.jsx)(M.a,{variant:"contained",color:"primary",style:{marginTop:"5px"},onClick:function(){var t;n((t=p,function(e,n){for(var a,c=n().calendar.list,i=0;i<c.length;i++)c[i].id===t&&(a=c[i]);var r={title:a.title,date:a.date,completed:!0};a.id&&T.doc(a.id).update(r).then((function(n){e(function(e){return{type:"calendar/UPDATE",id:e}}(t))}))})),e.history.goBack()},children:"\uc774\ubca4\ud2b8 \uc644\ub8cc"})]})]})}),Object(x.jsx)(ce,{onClick:function(){e.history.replace("/")}})]})},le=function(e){var n=Object(j.b)(),t=Object(u.f)(),c=Object(a.useState)(e.userObj.displayName),i=Object(r.a)(c,2),o=i[0],s=i[1],p=function(){var n=Object(d.a)(l.a.mark((function n(a){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a.preventDefault(),e.userObj.displaName===o){n.next=5;break}return n.next=4,e.userObj.updateProfile({displayName:o});case 4:e.refreshUser();case 5:t.push("/");case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return Object(a.useEffect)((function(){console.log("profile"),console.log(e.userObj)})),Object(x.jsxs)("div",{className:"container",children:[Object(x.jsxs)("form",{onSubmit:p,className:"profileForm",children:[Object(x.jsx)("input",{onChange:function(e){var n=e.target.value;s(n)},type:"text",autoFocus:!0,placeholder:"Display name",value:o,className:"formInput"}),Object(x.jsx)("input",{type:"submit",value:"\ud504\ub85c\ud544 \uc218\uc815 \uc644\ub8cc",className:"formBtn",style:{marginTop:10}})]}),Object(x.jsx)("span",{className:"formBtn cancelBtn logOut",onClick:function(){h.signOut(),n({type:"calendar/RESET"}),localStorage.removeItem("user"),t.push("/")},children:"Log Out"})]})},de=t(46),ue=(t(158),function(e){var n=Object(a.useState)([]),t=Object(r.a)(n,2),c=t[0],i=t[1];return b.collection("calendar").where("planning","==",e.channelUrl).get().then((function(e){var n=e.docs.map((function(e){return Object(S.a)({id:e.id},e.data())}));i(n)})),Object(x.jsxs)("div",{className:"event-list",children:[c.map((function(e){return Object(x.jsxs)("div",{className:"chat-event",children:[Object(x.jsx)("h4",{children:e.title}),Object(x.jsx)("div",{children:e.date})]})})),Object(x.jsx)("div",{})]})}),je=t(69),pe=t.n(je),be=t(195);var he=E.a.div(ee||(ee=Object(o.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),Oe=E.a.div(ne||(ne=Object(o.a)(["\n  display: flex;\n  flex-direction: column;\n  background: #fff;\n  padding: 24px 50px;\n  border-radius: 4px;\n  width: 800px;\n  height: 400px;\n  box-sizing: border-box;\n  z-index: 10;\n  & h1 {\n    text-align: center;\n    color: #af7ac5;\n  }\n\n  & Button {\n    min-width: 200px;\n  }\n"]))),xe=E.a.div(te||(te=Object(o.a)(["\n  margin: 0 auto;\n  @media only screen and (max-width: 768px) {\n    & Button {\n      width: 100%;\n    }\n  }\n"]))),fe=function(e){var n=Object(a.useRef)(),t=Object(a.useRef)(),c=Object(j.b)();return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(he,{children:Object(x.jsxs)(Oe,{children:[Object(x.jsxs)("h1",{children:[Object(x.jsx)(pe.a,{})," \xa0\uc774\ubca4\ud2b8 \ucd94\uac00\ud558\uae30"]}),Object(x.jsx)("hr",{}),Object(x.jsx)(be.a,{style:{marginBottom:"3rem"},label:"\ub0a0\uc9dc\ub97c \ucd94\uac00\ud574\uc8fc\uc138\uc694",type:"datetime-local",defaultValue:"0000-00-00T00:00",InputLabelProps:{shrink:!0},inputRef:n}),Object(x.jsx)("input",{type:"text",style:{borderRadius:"5px",border:"1px solid #888",padding:"16px",fontSize:"16px",marginBottom:"3rem"},placeholder:"\uc774\ubca4\ud2b8\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694.",ref:t}),Object(x.jsxs)(xe,{children:[Object(x.jsx)(M.a,{variant:"contained",style:{marginRight:"50px"},onClick:function(){e.display("none")},children:"\ub4a4\ub85c\uac00\uae30"}),Object(x.jsx)(M.a,{variant:"contained",color:"primary",style:{marginTop:"5px"},onClick:function(){var a,i={date:n.current.value,title:t.current.value,completed:!1,creatorId:e.userObj.uid,planning:e.planning};""!==i.date?""!==i.title?(console.log(n.current.value),c((a=i,function(e){var n={date:a.date,title:a.title,completed:!1,creatorId:a.creatorId,planning:a.planning};T.add(n).then((function(e){n=Object(S.a)(Object(S.a)({},n),{},{id:e.id}),console.log(n.creatorId)})).catch((function(e){console.log(e),window.alert("\uc5d0\ub7ec\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4. \ub098\uc911\uc5d0 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694!")}))})),window.alert("\uc774\ubca4\ud2b8\uac00 \ucd94\uac00\ub418\uc5c8\uc2b5\ub2c8\ub2e4!"),e.display("none")):window.alert("\uc774\ubca4\ud2b8\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694"):window.alert("\ub0a0\uc9dc\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694")},children:"\uc774\ubca4\ud2b8 \ucd94\uac00"})]})]})})})};var ge,me,ve,ye=Object(de.e)((function(e){var n=e.stores,t=n.sdkStore,c=n.userStore,i=e.config,o=i.isOnline,s=i.userId,l=i.appId,d=i.accessToken,u=i.theme,j=i.userListQuery,p=i.logger,b=i.pubSub;Object(a.useCallback)((function(){console.log("SDK store list log",t.initialized,t.sdk,t.loading,t.error),console.log("User store list log",c.initialized,c.user,c.loading),console.log("Config list log",o,s,l,d,u,j,p,b)}),[t.initialized,t.sdk,t.loading,t.error,c.initialized,c.user,c.loading,o,s,l,d,u,j,p,b])();var h=Object(a.useState)(!1),O=Object(r.a)(h,2),f=O[0],g=O[1],m=Object(a.useState)(""),v=Object(r.a)(m,2),y=v[0],w=v[1],C=Object(a.useState)(["none"]),k=Object(r.a)(C,2),E=k[0],I=k[1];return console.log(y),Object(x.jsxs)("div",{className:"customized-app",children:[Object(x.jsxs)("div",{className:"sendbird-app__wrap",children:[Object(x.jsx)("div",{className:"sendbird-app__channellist-wrap",children:Object(x.jsx)(de.b,{onChannelSelect:function(e){console.log("channel",e),e&&e.url&&w(e.url)}})}),Object(x.jsx)("div",{className:"sendbird-app__conversation-wrap",children:Object(x.jsx)(de.a,{channelUrl:y,onChatHeaderActionClick:function(){g(!0)}})}),Object(x.jsxs)("div",{className:"sendbird-app_eventlist",children:[Object(x.jsx)("div",{style:{marginTop:30},children:Object(x.jsx)(ue,{channelUrl:y})}),Object(x.jsx)("button",{onClick:function(){return I("block")},children:"+"}),Object(x.jsx)("div",{className:"chatEventUploadForm",style:{display:"".concat(E),width:"50%"},children:Object(x.jsx)(fe,{planning:y,display:I,userObj:e.userObj})})]})]}),f&&Object(x.jsx)("div",{className:"sendbird-app__settingspanel-wrap",children:Object(x.jsx)(de.c,{channelUrl:y,onCloseClick:function(){g(!1)}})})]})}));t(160);function we(e){var n=e.userObj.email,t=e.userObj.displayName;return Object(x.jsx)(de.d,{appId:"955C3A3C-AAB3-453E-B6C2-FC26DB354F2E",userId:n,nickname:t,userObj:e.userObj,children:Object(x.jsx)(ye,{userObj:e.userObj})})}var Ce,ke,Ee,Ie=E.a.div(ge||(ge=Object(o.a)(["\n  align-items: center;\n  justify-content: center;\n"]))),Ne=E.a.div(me||(me=Object(o.a)(["\n  display: flex;\n  flex-direction: column;\n  background: #fff;\n  padding: 24px 50px;\n  border-radius: 4px;\n  width: 800px;\n  height: 400px;\n  box-sizing: border-box;\n  z-index: 10;\n  & h1 {\n    text-align: center;\n    color: #af7ac5;\n  }\n\n  & Button {\n    min-width: 200px;\n  }\n"]))),Se=E.a.div(ve||(ve=Object(o.a)(["\n  margin: 0 auto;\n  @media only screen and (max-width: 768px) {\n    & Button {\n      width: 100%;\n    }\n  }\n"]))),Be=function(){var e=Object(a.useRef)();return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(Ie,{children:Object(x.jsxs)(Ne,{children:[Object(x.jsxs)("h1",{children:[Object(x.jsx)(pe.a,{})," \xa0\uc774\ubca4\ud2b8 \uac80\uc0c9\ud558\uae30"]}),Object(x.jsx)("hr",{}),Object(x.jsx)(be.a,{style:{marginBottom:"3rem"},label:"\ub0a0\uc9dc\ub97c \ucd94\uac00\ud574\uc8fc\uc138\uc694",type:"date",defaultValue:"0000-00-00",InputLabelProps:{shrink:!0},inputRef:e}),Object(x.jsx)(Se,{children:Object(x.jsx)(M.a,{variant:"contained",style:{marginRight:"50px"},onClick:function(){console.log(e.current.value)},children:"\uac80\uc0c9"})})]})})})},Te=t(49),Ae=t.n(Te),ze=E.a.div(Ce||(Ce=Object(o.a)(["\n  position: fixed;\n  top: 80%;\n  right: 30px;\n  z-index: 10;\n  @media only screen and (max-width: 768px) {\n    top: 60%;\n    left: 10px;\n    & p {\n      display: none;\n    }\n  }\n"]))),Fe=E.a.div(ke||(ke=Object(o.a)(["\n  position: fixed;\n  top: 90%;\n  right: 30px;\n  z-index: 10;\n  @media only screen and (max-width: 768px) {\n    top: 90%;\n    left: 10px;\n  }\n"]))),Ue=E.a.div(Ee||(Ee=Object(o.a)(["\n  position: fixed;\n  top: 0;\n  right: 10px;\n  z-index: 10;\n  @media only screen and (max-width: 768px) {\n    top: 80%;\n    left: 10px;\n    & p {\n      display: none;\n    }\n  }\n"]))),Le=Object(u.g)((function(e){Object(a.useEffect)((function(){console.log(e.isLoggedIn),n()}));Object(j.c)((function(e){return e.calendar.list})).map((function(e){return{title:e.title,date:e.date,publicId:e.id,completed:e.completed,color:e.completed?"#E74C3C":"#ABEBC6"}}));var n=function(){var n=Object(d.a)(l.a.mark((function n(){var t,a;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.isLoggedIn){n.next=8;break}return t=new Ae.a({appId:"955C3A3C-AAB3-453E-B6C2-FC26DB354F2E",localCacheEnabled:!0}),n.next=4,t.connect(e.userObj.email,(function(e,n){}));case 4:(a=t.GroupChannel.createMyGroupChannelListQuery()).includeEmpty=!0,a.userIdsIncludeFilter=[""],a.next((function(e,n){var t=e.map((function(e){return{chatUrl:e.url}}));localStorage.setItem("userChatUrl",JSON.stringify(t)),console.log(t)}));case 8:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return Object(x.jsx)(u.c,{children:e.isLoggedIn?Object(x.jsxs)("div",{children:[Object(x.jsxs)(u.a,{path:"/",exact:!0,children:[Object(x.jsx)(W,{history:e.history,userObj:e.userObj}),Object(x.jsx)(ze,{children:Object(x.jsx)(v.a,{color:"secondary","aria-label":"add",onClick:function(){e.history.push("/chat")},children:Object(x.jsx)(m.a,{})})}),Object(x.jsx)(Fe,{children:Object(x.jsx)(v.a,{color:"primary","aria-label":"add",onClick:function(){e.history.push("/profile")},children:Object(x.jsx)(k.a,{})})}),Object(x.jsx)(Ue,{children:Object(x.jsxs)(v.a,{variant:"extended",onClick:n,children:[Object(x.jsx)(w.a,{}),Object(x.jsx)("p",{style:{fontSize:"1rem"},children:"\uc0c8\ub85c\uc6b4 \uc774\ubca4\ud2b8 \ucc3e\uae30"})]})})]}),Object(x.jsx)(u.a,{path:"/profile",render:function(){return Object(x.jsx)(le,{userObj:e.userObj,refreshUser:e.refreshUser})}}),Object(x.jsx)(u.a,{path:"/detail/:defid",component:se,exact:!0}),Object(x.jsx)(u.a,{path:"/calendarfind",component:Be}),Object(x.jsx)(u.a,{path:"/chat",render:function(){return Object(x.jsx)(we,{userObj:e.userObj})}})]}):Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(u.a,{exact:!0,path:"/",children:Object(x.jsx)(f,{})})})})}));var De=function(){var e=Object(a.useState)(!1),n=Object(r.a)(e,2),t=n[0],c=n[1],i=Object(a.useState)(!1),o=Object(r.a)(i,2),s=o[0],l=o[1],d=Object(a.useState)(null),u=Object(r.a)(d,2),j=u[0],p=u[1];return Object(a.useEffect)((function(){h.onAuthStateChanged((function(e){e?(l(!0),p({displayName:e.displayName,uid:e.uid,email:e.email})):l(!1),c(!0)}))}),[s]),Object(x.jsx)(x.Fragment,{children:t?Object(x.jsx)(Le,{refreshUser:function(){var e=h.currentUser;p({displayName:e.displayName,uid:e.uid,email:e.email})},isLoggedIn:s,userObj:j}):"Initializing.."})},Re=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,197)).then((function(n){var t=n.getCLS,a=n.getFID,c=n.getFCP,i=n.getLCP,r=n.getTTFB;t(e),a(e),c(e),i(e),r(e)}))},_e=t(64),Pe=t(53),Ge=t(25),Je=t(106),Ke=(Object(Ge.a)(),[Je.a]),We=Pe.a.apply(void 0,Ke),Me=Object(Pe.c)({calendar:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(n.type){case"calendar/GET_CALENDAR":var t=Object(B.a)(new Set(Object(B.a)(n.data)));return{list:t};case"calendar/UPLOAD":var a=[].concat(Object(B.a)(e.list),[n.data]);return{list:a};case"calendar/DELETE":var c=e.list.filter((function(e){if(e.id!==n.calendar)return e}));return{list:c};case"calendar/UPDATE":var i=e.list.map((function(e){return e.id===n.id?Object(S.a)(Object(S.a)({},e),{},{completed:!0}):e}));return{list:i};case"calendar/RESET":return{list:[]};default:return e}}}),Qe=Object(Pe.d)(Me,We);i.a.render(Object(x.jsx)(j.a,{store:Qe,children:Object(x.jsx)(_e.a,{children:Object(x.jsx)(De,{})})}),document.getElementById("root")),Re()}},[[161,1,2]]]);
//# sourceMappingURL=main.5d058a74.chunk.js.map